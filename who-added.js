var whoDadded=(()=>{var c=Object.create,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,u=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,e=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("react"===e)return Spicetify.React;if("react-dom"===e)return Spicetify.ReactDOM;if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),t=(e,t,a)=>{a=null!=e?c(u(e)):{};var r=!t&&e&&e.__esModule?a:o(a,"default",{value:e,enumerable:!0}),i=e,l=void 0,n=void 0;if(i&&"object"==typeof i||"function"==typeof i)for(let e of f(i))d.call(r,e)||e===l||o(r,e,{get:()=>i[e],enumerable:!(n=s(i,e))||n.enumerable});return r},a=t(e("react")),r=t(e("react-dom")),l=t(e("react"));async function n(e){var t,a,r,i={userInfo:{culprit:"",culpritProfileSrc:"",avatarSrc:""},playlistData:{playlistTitle:"",playlistSrc:""}};return e&&(t=e.context_uri)&&(r=await async function(e){e=Spicetify.URI.isPlaylistV2(e)?Spicetify.URI.fromString(e):Spicetify.URI.playlistV2URI(e);try{return await Spicetify.Platform.PlaylistAPI.getMetadata(e.toURI())}catch(e){}}(t),a=await async function(e){e=Spicetify.URI.isPlaylistV2(e)?Spicetify.URI.fromString(e):Spicetify.URI.playlistV2URI(e);try{return await Spicetify.Platform.PlaylistAPI.getContents(e.toURI())}catch(e){}}(t),r)&&(r=r.name,t=p(t),i.playlistData.playlistTitle=r,i.playlistData.playlistSrc=t,e.track)&&a&&(r=await async function(e,t){const a=Spicetify.URI.isTrack(e)?Spicetify.URI.fromString(e):Spicetify.URI.trackURI(e,"00:00","",!1),r=t.find(e=>e.uri===a.toURI());if(r)return r.addedBy.uri}(e.track.uri,a.items))&&(t=await async function(e){e=Spicetify.URI.isProfile(e)?Spicetify.URI.fromString(e):Spicetify.URI.profileURI(e,[]);if(e.username)try{return await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/users/"+e.username)}catch(e){}}(r))&&(e=t.display_name,a=p(t.uri),i.userInfo.culprit=e,i.userInfo.culpritProfileSrc=a,0<t.images.length)&&(r=t.images[0].url,i.userInfo.avatarSrc=r),i}function p(e){var t=e.split(":");if(t.length<2)return e;var a=t.slice(1);let r="/";for(let e=0;e<a.length;e++){var i=a[e];r+=i+"/"}return r}function i({playerState:e}){const[a,r]=(0,l.useState)(void 0),i=((0,l.useEffect)(()=>{let t=!0;return n(e).then(e=>{t&&r(e)}),()=>{t=!1}},[e]),e=>{Spicetify.Platform.History.push(e)});return l.default.createElement("div",{className:"WhoAddedWidgetContainer"},!a||!a.playlistData||!a.playlistData.playlistTitle||a.playlistData.playlistTitle.length<1?null:l.default.createElement("div",{className:"WhoAddedPlaylistContainer"},l.default.createElement("h5",{className:"DullText"},"From"),l.default.createElement("h5",null,a.playlistData.playlistSrc.length<1?l.default.createElement("a",{className:"EmphasisText"},a.playlistData.playlistTitle):l.default.createElement("a",{className:"EmphasisText Pointer",onClick:()=>i(a.playlistData.playlistSrc)},a.playlistData.playlistTitle))),(()=>{if(!a||!a.userInfo||!a.userInfo.culprit||a.userInfo.culprit.length<1)return null;return l.default.createElement("div",{className:"WhoAddedCulpritContainer"},l.default.createElement("h5",{className:"DullText"},"Added by"),(()=>{const t=0<a.userInfo.culpritProfileSrc.length;return l.default.createElement("h5",{className:"WhoAddedCulpritAnchorContainer "+(t?"Pointer":""),onClick:e=>{t&&i(a.userInfo.culpritProfileSrc)}},a.userInfo.avatarSrc.length<1?null:l.default.createElement("img",{className:"Avatar",src:a.userInfo.avatarSrc,width:24,height:24}),l.default.createElement("a",{className:"EmphasisText"},a.userInfo.culprit))})())})())}var y="who-added";function m(){const[e,t]=(0,a.useState)(Spicetify.Player.data);return(0,a.useEffect)(()=>(Spicetify.Player.addEventListener("songchange",async e=>{e&&t(e.data)}),()=>{Spicetify.Player.removeEventListener("songchange",()=>{})})),a.default.createElement(a.default.Fragment,null,a.default.createElement(i,{playerState:e}))}var h=async function(){for(;!(null!=Spicetify&&Spicetify.showNotification&&Spicetify.CosmosAsync&&Spicetify.Player&&Spicetify.Platform&&Spicetify.URI);)await new Promise(e=>setTimeout(e,100));let e=document.querySelector(".main-nowPlayingBar-left");for(;!e;)await new Promise(e=>setTimeout(e,100)),e=document.querySelector(".main-nowPlayingBar-left");console.log(`Extension ${y} loaded!`);var t=document.createElement("div");t.className+="WhoAddedWidgetContainer",e.appendChild(t),r.default.render(a.default.createElement(m,null),t)};(async()=>{await h()})()})();(async()=>{var e;document.getElementById("whoDadded")||((e=document.createElement("style")).id="whoDadded",e.textContent=String.raw`
  .main-nowPlayingBar-left{display:flex!important;flex-direction:row!important;align-items:center!important}.WhoAddedWidgetContainer{display:flex;flex-direction:column;align-self:center;order:1;margin-left:.5rem}.WhoAddedCulpritContainer,.WhoAddedPlaylistContainer{display:flex;flex-direction:row;align-items:center;gap:.25rem}.WhoAddedCulpritAnchorContainer{display:flex;flex-direction:row;align-items:center;gap:.25rem}.Avatar{border-radius:100%}.DullText{white-space:nowrap;color:var(--spice-subtext)}.EmphasisText{white-space:nowrap;color:var(--spice-text)}.Pointer{cursor:pointer}
      `.trim(),document.head.appendChild(e))})();